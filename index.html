<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="./masonry-layout-vanilla.min.css" />
    
    <!-- <style>
        #container {
            display: grid;
            grid-template-columns: repeat(4, 20%);
            grid-gap: 5%;
            margin-left: 5%;
        }

        img{
            width: 80%;
        }
    </style> -->
</head>
<body>
    <h1>Hello from imgur</h1>
    <input type="text" placeholder="Search" id="search">
    <button onclick="search()" >Search</button>
    <div id="container"></div>
    
<script src="./masonry-layout-vanilla.min.js"></script>
</body>


</html>


<script>
    async function search() {
        let val = document.getElementById("search").value;
        let res = await fetch(`https://api.unsplash.com/search/photos?client_id=Wi9ocF2wz5fY5eHb5EmlIOMH5X1aq5l4GAV6-RvkhFY&query=${val}}`);
        let d = await res.json();
        console.log('d:', d);
        //set data to localStorage and redirect to other page
    }



    async function getData(num) {
        // let r = await fetch(`https://api.imgur.com/3/gallery/search/viral/day?q=cats&q_type=jpg`,
        // {
        //     method: "GET",
        //     headers: {
        //         "content-type": "application/json",
        //         "Authorization": "Client-ID 946e304a383aa29"
        //     }
        // });
        // let dwe = await r.json();
        // console.log('dwe:', dwe)

        // let res = await fetch(`https://api.imgur.com/3/gallery/hot/viral/day/1?showViral=true&mature=true&album_previews=true`,
        // {
        //     method: "GET",
        //     headers: {
        //         "content-type": "application/json",
        //         "Authorization": "Client-ID 946e304a383aa29"
        //     }
        // });


        let res = await fetch(`https://api.unsplash.com/photos?query=random&page=${num}&per_page=30&client_id=Wi9ocF2wz5fY5eHb5EmlIOMH5X1aq5l4GAV6-RvkhFY`);



        let data = await res.json();
        // console.log(data);
        console.log('data:', data, num)
        
        showData(data);
    }
    getData(1);
    getData(2);
    getData(3);
    getData(4);
    getData(5);
    getData(6);
    getData(7);


    async function showData(data) {

    let container = document.getElementById("container");

        data.forEach((el)=>{
        
            // let parent = document.createElement("div");
            // parent.setAttribute("id", "parent")

            
            let img = document.createElement("img");
            img.setAttribute("class", "image")
            img.loading = "lazy";

            img.src = el.urls.small;
            // parent.append(img);
            // container.append(parent)

            // let div = document.createElement("div");
            // let title = document.createElement("h2");
            // title.innerText = el.title;
            // let image = document.createElement("img");
            // let im = el.images;
            // for (let i=0; i< im.length; i++) {
            //     if(im[i].type == "image/jpeg" || im[i].type == "image/png" || im[i].type == "image/jpg"){
            //         console.log("i.link:", im[i].link);
            //        image.src = `https://i.imgur.com/bHRdJBG.jpg`;
            //         break;
            //     }
            // }
            // // image.src = "https://i.imgur.com/qMPkqEV.jpg";
            // // console.log('el.images:', el.images)
            // image.style.width = "100px";
            // image.style.height = "100px"
            // //console.log('im[0]:', im[0].gifv)
            // div.append(image, title);
            // container.append(div);

            let wrapperMasonry = document.createElement("div");
            wrapperMasonry.setAttribute("class", "wrapper-masonry");

            let masonryImage = document.createElement("div");
            masonryImage.setAttribute("id", "masonry-2");

            masonryImage.append(img);
            wrapperMasonry.append(masonryImage);
            container.append(wrapperMasonry);

            fecthMasonry('masonry-2', 'image', 4);
        })
    }

</script>